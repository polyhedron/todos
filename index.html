<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8" />
    <title>polyhedron's react tutorial</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"/>

</head>
<body>

<div class="container mt-4">

    <div id="todoApp"></div>

</div>

<script src="https://fb.me/react-0.14.3.js"></script>
<script src="https://fb.me/react-dom-0.14.3.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/babel-core/5.8.34/browser.min.js"></script>

<script type="text/babel">

    // Uses bootstrap v4 styles

    var Todo = React.createClass({
        getInitialState: function(){
            return {
                editing: false
            }
        },
        edit: function(){
            //var todoText = this.refs.todoTextArea.value;
            //console.log(todoText);

            this.setState({
                editing: true
            });
        },
        save: function(){
            var textAreaVal = this.refs.todoTextArea.value;
            console.log(textAreaVal);
            this.setState({
                editing: false
            })
        },
        delete:function(){
            console.log('Delete Button Clicked');
        },
        renderView: function(){
            return (
                    <div className="col-lg-4 border pb-2">
                        <div className="todoText mb-3 mt-2">{this.props.children}</div>
                        <hr/>
                        <button onClick={this.edit} className="btn btn-primary">Edit</button>
                        <button onClick={this.delete} className="btn btn-danger ml-1">Delete</button>
                    </div>
            );
        },
        renderEdit: function(){
            return (
                    <div className="col-lg-4 border pb-2">
                        <textarea className="form-control mt-1" defaultValue={this.props.children} ref="todoTextArea"></textarea>
                        <hr/>
                        <button onClick={this.save} className="btn btn-success">Save</button>
                    </div>
            );
        },
        render: function() {
            if(this.state.editing){
                return this.renderEdit();
            } else {
                return this.renderView();
            }
        }
    });

    ReactDOM.render(
            <div className="row">
                <Todo>Get Milk</Todo>
                <Todo>Get Bread</Todo>
                <Todo>Get Eggs</Todo>
            </div>,
            document.getElementById('todoApp')
    );

</script>

</body>
</html>